'use strict';

var cookiesMiddleWare = require('universal-cookie-express');
var express = require('express');
var path = require('path');

// Seeds table with dummy data, comment out when use real data
var seed = require('../database/seed.js');
// Uncomment the following line when are done with seed data:
// const db = require('../database/index.js');

var port = 8080;
var app = express();

app.use(express.static(path.join(__dirname, '../client/dist')));

app.get('/verifyAuth', cookiesMiddleWare(), function (req, res) {
  console.log('Serving request type ', req.method, ' from ', req.path);
  // console.log(req.universalCookies.get('dbd-session-cookie'));
  res.send('WE CHECK COOKIE VS DATABASE');
});

app.get('/login', cookiesMiddleWare(), function (req, res) {
  console.log('Serving request type ', req.method, ' from ', req.path);
  // console.log(req.universalCookies.get('dbd-session-cookie'));
  res.send('WE SHOULD ADD COOKIE TO DATABASE');
});

app.get('/logout', cookiesMiddleWare(), function (req, res) {
  console.log('Serving request type ', req.method, ' from ', req.path);
  // console.log(req.universalCookies.get('dbd-session-cookie'));
  res.send('WE SHOULD REMOVE COOKIE FROM DATABASE');
});

app.get('*', cookiesMiddleWare(), function (req, res) {
  console.log('Serving request type ', req.method, ' from ', req.path);
  // console.log(req.universalCookies.get('dbd-session-cookie'));
  res.sendFile(path.resolve(__dirname, '../client/dist', 'index.html'));
});

app.listen(port);
console.log('server started on port ', port);
//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbIi4uLy4uL3NlcnZlci9pbmRleC5qcyJdLCJuYW1lcyI6WyJjb29raWVzTWlkZGxlV2FyZSIsInJlcXVpcmUiLCJleHByZXNzIiwicGF0aCIsInNlZWQiLCJwb3J0IiwiYXBwIiwidXNlIiwic3RhdGljIiwiam9pbiIsIl9fZGlybmFtZSIsImdldCIsInJlcSIsInJlcyIsImNvbnNvbGUiLCJsb2ciLCJtZXRob2QiLCJzZW5kIiwic2VuZEZpbGUiLCJyZXNvbHZlIiwibGlzdGVuIl0sIm1hcHBpbmdzIjoiOztBQUFBLElBQU1BLG9CQUFvQkMsUUFBUSwwQkFBUixDQUExQjtBQUNBLElBQU1DLFVBQVVELFFBQVEsU0FBUixDQUFoQjtBQUNBLElBQU1FLE9BQU9GLFFBQVEsTUFBUixDQUFiOztBQUVBO0FBQ0EsSUFBTUcsT0FBT0gsUUFBUSxxQkFBUixDQUFiO0FBQ0E7QUFDQTs7QUFFQSxJQUFNSSxPQUFPLElBQWI7QUFDQSxJQUFNQyxNQUFNSixTQUFaOztBQUVBSSxJQUFJQyxHQUFKLENBQVFMLFFBQVFNLE1BQVIsQ0FBZUwsS0FBS00sSUFBTCxDQUFVQyxTQUFWLEVBQXFCLGdCQUFyQixDQUFmLENBQVI7O0FBRUFKLElBQUlLLEdBQUosQ0FBUSxhQUFSLEVBQXVCWCxtQkFBdkIsRUFBNEMsVUFBQ1ksR0FBRCxFQUFNQyxHQUFOLEVBQWM7QUFDeERDLFVBQVFDLEdBQVIsQ0FBWSx1QkFBWixFQUFxQ0gsSUFBSUksTUFBekMsRUFBaUQsUUFBakQsRUFBMkRKLElBQUlULElBQS9EO0FBQ0E7QUFDQVUsTUFBSUksSUFBSixDQUFTLDZCQUFUO0FBQ0QsQ0FKRDs7QUFNQVgsSUFBSUssR0FBSixDQUFRLFFBQVIsRUFBa0JYLG1CQUFsQixFQUF1QyxVQUFDWSxHQUFELEVBQU1DLEdBQU4sRUFBYztBQUNuREMsVUFBUUMsR0FBUixDQUFZLHVCQUFaLEVBQXFDSCxJQUFJSSxNQUF6QyxFQUFpRCxRQUFqRCxFQUEyREosSUFBSVQsSUFBL0Q7QUFDQTtBQUNBVSxNQUFJSSxJQUFKLENBQVMsa0NBQVQ7QUFDRCxDQUpEOztBQU1BWCxJQUFJSyxHQUFKLENBQVEsU0FBUixFQUFtQlgsbUJBQW5CLEVBQXdDLFVBQUNZLEdBQUQsRUFBTUMsR0FBTixFQUFjO0FBQ3BEQyxVQUFRQyxHQUFSLENBQVksdUJBQVosRUFBcUNILElBQUlJLE1BQXpDLEVBQWlELFFBQWpELEVBQTJESixJQUFJVCxJQUEvRDtBQUNBO0FBQ0FVLE1BQUlJLElBQUosQ0FBUyx1Q0FBVDtBQUNELENBSkQ7O0FBTUFYLElBQUlLLEdBQUosQ0FBUSxHQUFSLEVBQWFYLG1CQUFiLEVBQWtDLFVBQUNZLEdBQUQsRUFBTUMsR0FBTixFQUFjO0FBQzlDQyxVQUFRQyxHQUFSLENBQVksdUJBQVosRUFBcUNILElBQUlJLE1BQXpDLEVBQWlELFFBQWpELEVBQTJESixJQUFJVCxJQUEvRDtBQUNBO0FBQ0FVLE1BQUlLLFFBQUosQ0FBYWYsS0FBS2dCLE9BQUwsQ0FBYVQsU0FBYixFQUF3QixnQkFBeEIsRUFBMEMsWUFBMUMsQ0FBYjtBQUNELENBSkQ7O0FBTUFKLElBQUljLE1BQUosQ0FBV2YsSUFBWDtBQUNBUyxRQUFRQyxHQUFSLENBQVkseUJBQVosRUFBdUNWLElBQXZDIiwiZmlsZSI6ImluZGV4LmpzIiwic291cmNlc0NvbnRlbnQiOlsiY29uc3QgY29va2llc01pZGRsZVdhcmUgPSByZXF1aXJlKCd1bml2ZXJzYWwtY29va2llLWV4cHJlc3MnKTtcbmNvbnN0IGV4cHJlc3MgPSByZXF1aXJlKCdleHByZXNzJyk7XG5jb25zdCBwYXRoID0gcmVxdWlyZSgncGF0aCcpO1xuXG4vLyBTZWVkcyB0YWJsZSB3aXRoIGR1bW15IGRhdGEsIGNvbW1lbnQgb3V0IHdoZW4gdXNlIHJlYWwgZGF0YVxuY29uc3Qgc2VlZCA9IHJlcXVpcmUoJy4uL2RhdGFiYXNlL3NlZWQuanMnKTtcbi8vIFVuY29tbWVudCB0aGUgZm9sbG93aW5nIGxpbmUgd2hlbiBhcmUgZG9uZSB3aXRoIHNlZWQgZGF0YTpcbi8vIGNvbnN0IGRiID0gcmVxdWlyZSgnLi4vZGF0YWJhc2UvaW5kZXguanMnKTtcblxuY29uc3QgcG9ydCA9IDgwODA7XG5jb25zdCBhcHAgPSBleHByZXNzKCk7XG5cbmFwcC51c2UoZXhwcmVzcy5zdGF0aWMocGF0aC5qb2luKF9fZGlybmFtZSwgJy4uL2NsaWVudC9kaXN0JykpKTtcblxuYXBwLmdldCgnL3ZlcmlmeUF1dGgnLCBjb29raWVzTWlkZGxlV2FyZSgpLCAocmVxLCByZXMpID0+IHtcbiAgY29uc29sZS5sb2coJ1NlcnZpbmcgcmVxdWVzdCB0eXBlICcsIHJlcS5tZXRob2QsICcgZnJvbSAnLCByZXEucGF0aCk7XG4gIC8vIGNvbnNvbGUubG9nKHJlcS51bml2ZXJzYWxDb29raWVzLmdldCgnZGJkLXNlc3Npb24tY29va2llJykpO1xuICByZXMuc2VuZCgnV0UgQ0hFQ0sgQ09PS0lFIFZTIERBVEFCQVNFJyk7XG59KTtcblxuYXBwLmdldCgnL2xvZ2luJywgY29va2llc01pZGRsZVdhcmUoKSwgKHJlcSwgcmVzKSA9PiB7XG4gIGNvbnNvbGUubG9nKCdTZXJ2aW5nIHJlcXVlc3QgdHlwZSAnLCByZXEubWV0aG9kLCAnIGZyb20gJywgcmVxLnBhdGgpO1xuICAvLyBjb25zb2xlLmxvZyhyZXEudW5pdmVyc2FsQ29va2llcy5nZXQoJ2RiZC1zZXNzaW9uLWNvb2tpZScpKTtcbiAgcmVzLnNlbmQoJ1dFIFNIT1VMRCBBREQgQ09PS0lFIFRPIERBVEFCQVNFJyk7XG59KTtcblxuYXBwLmdldCgnL2xvZ291dCcsIGNvb2tpZXNNaWRkbGVXYXJlKCksIChyZXEsIHJlcykgPT4ge1xuICBjb25zb2xlLmxvZygnU2VydmluZyByZXF1ZXN0IHR5cGUgJywgcmVxLm1ldGhvZCwgJyBmcm9tICcsIHJlcS5wYXRoKTtcbiAgLy8gY29uc29sZS5sb2cocmVxLnVuaXZlcnNhbENvb2tpZXMuZ2V0KCdkYmQtc2Vzc2lvbi1jb29raWUnKSk7XG4gIHJlcy5zZW5kKCdXRSBTSE9VTEQgUkVNT1ZFIENPT0tJRSBGUk9NIERBVEFCQVNFJyk7XG59KTtcblxuYXBwLmdldCgnKicsIGNvb2tpZXNNaWRkbGVXYXJlKCksIChyZXEsIHJlcykgPT4ge1xuICBjb25zb2xlLmxvZygnU2VydmluZyByZXF1ZXN0IHR5cGUgJywgcmVxLm1ldGhvZCwgJyBmcm9tICcsIHJlcS5wYXRoKTtcbiAgLy8gY29uc29sZS5sb2cocmVxLnVuaXZlcnNhbENvb2tpZXMuZ2V0KCdkYmQtc2Vzc2lvbi1jb29raWUnKSk7XG4gIHJlcy5zZW5kRmlsZShwYXRoLnJlc29sdmUoX19kaXJuYW1lLCAnLi4vY2xpZW50L2Rpc3QnLCAnaW5kZXguaHRtbCcpKTtcbn0pO1xuXG5hcHAubGlzdGVuKHBvcnQpO1xuY29uc29sZS5sb2coJ3NlcnZlciBzdGFydGVkIG9uIHBvcnQgJywgcG9ydCk7XG4iXX0=